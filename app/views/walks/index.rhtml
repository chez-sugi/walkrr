<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <title>Walkrr</title>
    <%= stylesheet_link_tag 'theme/ui.all.css' %>
    <%= stylesheet_link_tag 'application' %>
    <script type="text/javascript" src="http://maps.google.co.jp/maps?file=api&v=2&key=ABQIAAAAssRbwHuyv3Gumb423MsitxQ4K_TIE9WPn9nV0TywvbAF03HhgRSeUkroIL9Tf0OOYa2dfMaauJZo-w"  charset="utf-8"></script>
    <%= javascript_include_tag :defaults %>
        
        
  </head>
  <body>
    <div id="top">
      <div>
        <%= button_to_function "draw", "draw();" , {}, {:class => "button"}%>
        <%= button_to_function "back", "back();" , {}, {:class => "button"}%>
        <%= button_to_function "clear", "clearPath();", {}, {:class => "button"}%>
        <% form_tag({:action => "import"}, {:id => "import_form", :multipart => true, :target => "import_frame"}) do %>
          <%= file_field_tag "file" %>
          <%= button_to_function "import", "importFile();", {}, {:class => "button"}%>
        <% end %>
        length:<span id="length">0</span>m
        <span class="hspacer" ></span>
        GSV:
        <%= button_to_function "&oplus;", "nearestPanorama();" , {}, {:class => "button"}%>
        <%= button_to_function "&laquo;", "prevPanorama();" , {}, {:class => "button"}%>
        <%= button_to_function "&raquo;", "nextPanorama();" , {}, {:class => "button"}%>
        <%= button_to_function "&times;", "hidePanorama();" , {}, {:class => "button"} %>
            
      </div>
      <iframe id="import_frame" name="import_frame" style="display: none;"></iframe>
          
          
    </div>
    <div id="left">
      <div id="tabs">
        <ul>
          <li><a href="#search_form">search</a></li>
          <li><a href="#create_form">create</a></li>
        </ul>
       <div id="search_form">
          <%= hidden_field_tag "latitude" %>
          <%= hidden_field_tag "longitude" %>
          <%= hidden_field_tag 'search_path' %>
          <div>
            <%= radio_button_tag :condition, "neighbor"%><label for="condition_neighbor">neighbor</label>
            <%= radio_button_tag :condition, "areas"%><label for="condition_areas">areas</label>
            <%= radio_button_tag :condition, "cross"%><label for="condition_cross">cross</label>
            <%= radio_button_tag :condition, "all", "checked"%><label for="condition_all">all</label>
          </div>
          <div>
            <label for="distance">distance</label><%= text_field_tag "distance","0.5" %>
          </div>
          <div>
            <label for="areas">areas</label>
            <%= select_tag "areas", options_for_select(@areas), {:multiple => true, :size =>5, :name => 'areas[]'} %>
          </div>
          <div>
            <label for="order">order</label>
            <%= select_tag "order",
              options_for_select([["new first","date desc"], ["old first","date"],
                ["long first","length desc"], ["short first","length"],
                ["east first","xmax(PATH) desc"], ["west first","xmin(PATH)"],
                ["south first","ymin(PATH)"],["north first","ymax(PATH) desc"]])%>
          </div>
          <div>
            <label for="per_page">per page</label><%= text_field_tag "per_page","20" %>
          </div>
          <%= button_to_remote "search", {:submit => "search_form", :before => "setLatLng();setPath('#search_path')", :method => 'get', :url => { :action => "search" }}, {:class => "button"} %>
        </div>
        <div id="create_form">
          <div><label for="date">date</label>
          <%= text_field_tag 'date' %></div>

          <div>
            <label for="start">start</label>
            <%= text_field_tag 'start'  %>
          </div>

          <div>
            <label for="end">end</label>
            <%= text_field_tag 'end'  %>
          </div>

          <%= hidden_field_tag 'create_path'  %>
          <%= button_to_remote "create", {:submit => "create_form", :before => "setPath('#create_path');", :url => { :action => "create" }}, {:class => "button"} %>
        </div>
      </div>
 
      <div id="message"></div>
      <% form_tag({:action => "export_file"}, {:id => "export_form"}) do %>
        <div>
          <%= button_to_remote "delete", {:submit => "tbody", :url => { :action => "destroy" }}, {:class => "button"} %>
          <%= select_tag "type", 
            options_for_select([["kml","kml"], ["xmps","xmps"]]) %>
          <%= button_to_function "export", "$('#export_form').submit();", {}, {:class => "button"}%>  
        </div>
            
        <table>
          <tbody id="tbody">
          </tbody>
        </table>
            
      <% end %>
      <div id="pagination"></div>
    </div>
    <div id="map"></div>
    <div id="panorama" style="display: none;"></div>
        
        
        
  </body>
</html>
    
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Walkrr</title>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.4/themes/base/jquery-ui.css" rel="stylesheet" />
    <%= stylesheet_link_tag 'application' %>
    
    <script src="http://www.google.com/jsapi"></script> 
    <script src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script>
      google.load("jquery", "1.4.2");
      google.load("jqueryui", "1.8.4");
      google.load("visualization", "1", {packages:["corechart"]});
    </script>
    <%= javascript_include_tag :all, :cache => true %>      
  </head>
  <body>
    <div id="top">
      <div id="top_left">
        <%= button_to_function "new", "walk.pathEditor.newPath();" , {}, {:class => "button"}%>
        <%= button_to_function "delete", "walk.pathEditor.deletePath();", {}, {:class => "button"}%>
        <%= button_to_function "clear", "walk.pathEditor.deleteAll();", {}, {:class => "button"}%>
        <%= button_to_function "elevation", "walk.requestElevation();", {}, {:class => "button"}%>
        <%= form_tag({:action => "import"}, {:id => "import_form", :multipart => true, :target => "import_frame"}) do %>
          <%= file_field_tag "file" %>
          <%= button_to_function "import", "walk.importFile();", {}, {:class => "button"}%>
        <% end %>
        <span id="editing_label">Now editing...<span id="length">0</span>m</span>
        </div>
      
      <iframe id="import_frame" name="import_frame" style="display: none;"></iframe>
          
          
    </div>
    <div id="left">
      <div id="tabs">
        <ul>
          <li><a href="#search_form">search</a></li>
          <li><a href="#create_form">create</a></li>
        </ul>
        <%= form_tag({:action => 'search'}, {:id => 'search_form', :remote => true, :method => 'GET'}) do  %>
          <%= hidden_field_tag "latitude" %>
          <%= hidden_field_tag "longitude" %>
          <%= hidden_field_tag "radius" %>
          <%= hidden_field_tag 'search_path' %>
          <div id="conditionBox">
            <%= radio_button_tag :condition, "neighbor"%><label for="condition_neighbor">neighbor</label>
            <%= radio_button_tag :condition, "areas"%><label for="condition_areas">areas</label>
            <%= radio_button_tag :condition, "cross"%><label for="condition_cross">cross</label>
            <%= radio_button_tag :condition, "all", "checked"%><label for="condition_all">all</label>
          </div>
          <div id="areasBox">
            <label for="areas">areas</label>
            <%= select_tag "areas", options_for_select(@areas), {:multiple => true, :size =>5, :name => 'areas[]'} %>
          </div>
          <div>
            <label >date</label>
            <%= select_tag "year",
              options_for_select(@year_opts)%> /
            <%= select_tag "month",
              options_for_select(@month_opts)%>
          </div>
          <div>
            <label for="order">order</label>
            <%= select_tag "order",
              options_for_select([["new first","date desc"], ["old first","date"],
                ["long first","length desc"], ["short first","length"],
                ["east first","xmax(PATH) desc"], ["west first","xmin(PATH)"],
                ["south first","ymin(PATH)"],["north first","ymax(PATH) desc"]])%>
          </div>
          <div>
            <label for="per_page">per page</label><%= text_field_tag "per_page","20" %>
          </div>
          <%= submit_tag "search" %>
        <% end %>
        <%= form_tag({:action => 'create'}, {:id => 'create_form', :remote => true }) do  %>
          <div><label for="date">date</label>
          <%= text_field_tag 'date' %></div>

          <div>
            <label for="start">start</label>
            <%= text_field_tag 'start'  %>
          </div>

          <div>
            <label for="end">end</label>
            <%= text_field_tag 'end'  %>
          </div>

          <%= hidden_field_tag 'create_path'  %>
          <%= submit_tag "create" %>
        <% end %>
      </div>
 
      <div id="message"></div>
      <%= form_tag("", {:id => "results_form"}) do %>
        <div>
          <%= button_to_function "check all", "$('input[name=id[]]').attr('checked', true);", {}%>
          <%= button_to_function "reset", "$('input[name=id[]]').attr('checked', false);", {}%>
          <%= submit_tag "show", {:onclick => "$('#results_form').attr('action', '#{url_for(:action => :show)}');$('#results_form').attr('data-remote', true);"} %>
          <%#= button_to_function "export", "$('#results_form').submit();", {}%>
          <%= submit_tag "export", {:onclick => "$('#results_form').attr('action', '#{url_for(:action => :export_file)}');$('#results_form').removeAttr('data-remote');"} %>
        
          <%= submit_tag "delete", {:onclick => "$('#results_form').attr('action', '#{url_for(:action => :destroy)}');$('#results_form').attr('data-remote', true);"} %>
        </div>
            
        <table>
          <tbody id="tbody">
          </tbody>
        </table>
            
      <% end %>
      <div id="pagination"></div>
    </div>
    <div id="map"></div>
   
    <div id="elevation_chart"></div>

        
        
  </body>
</html>
    
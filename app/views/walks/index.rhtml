<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <title>Walkrr</title>
    <%= stylesheet_link_tag 'scaffold' %>
    <%= stylesheet_link_tag 'application' %>
    <script type="text/javascript" src="http://maps.google.co.jp/maps?file=api&v=2&key=ABQIAAAAssRbwHuyv3Gumb423MsitxQ4K_TIE9WPn9nV0TywvbAF03HhgRSeUkroIL9Tf0OOYa2dfMaauJZo-w"  charset="utf-8"></script>
    <%= javascript_include_tag :defaults %>
    <%= javascript_include_tag 'lowpro' %>
        
        
  </head>
  <body>
    <div id="top">
      <div>
        <%= link_to_function "draw", "draw();" , {}, {:class => "button"}%>
        <%= link_to_function "back", "back();" , {}, {:class => "button"}%>
        <%= link_to_function "clear", "clearPath();", {}, {:class => "button"}%>
        <% form_tag({:action => "import"}, {:id => "import_form", :multipart => true, :target => "import_frame"}) do %>
          <%= file_field_tag "file" %>
          <a href="javascript:void(0);" onclick="importFile();" class="button">import</a>
        <% end %>
        length:<span id="length">0</span>m
        <span class="hspacer" ></span>
        GSV:
        <%= link_to_function "&oplus;", "nearestPanorama();" , {}, {:class => "button"}%>
        <%= link_to_function "&laquo;", "prevPanorama();" , {}, {:class => "button"}%>
        <%= link_to_function "&raquo;", "nextPanorama();" , {}, {:class => "button"}%>
        <%= link_to_function "&times;", "hidePanorama();" , {}, {:class => "button"} %>
            
      </div>
      <iframe id="import_frame" name="import_frame" style="display: none;"></iframe>
          
          
    </div>
    <div id="left">
        
      <fieldset id="search_form">
        <legend>search</legend>
        <%= hidden_field_tag "latitude" %>
        <%= hidden_field_tag "longitude" %>
        <%= hidden_field_tag 'search_path' %>
        <div>
          <%= radio_button_tag :condition, "neighbor"%><label for="condition_neighbor">neighbor</label>
          <%= radio_button_tag :condition, "areas"%><label for="condition_areas">areas</label>
          <%= radio_button_tag :condition, "cross"%><label for="condition_cross">cross</label>
          <%= radio_button_tag :condition, "all", "checked"%><label for="condition_all">all</label>
        </div>
        <div>
          <label for="distance">distance</label><%= text_field_tag "distance","0.5" %>
        </div>
        <div>
          <label for="areas">areas</label>
          <%= select_tag "areas", options_for_select(@areas), {:multiple => true, :size =>5, :name => 'areas[]'} %>
        </div>
        <div>
          <label for="order">order</label>
          <%= select_tag "order", 
            options_for_select([["new first","date desc"], ["old first","date"], 
              ["long first","length desc"], ["short first","length"],
              ["east first","xmax(PATH) desc"], ["west first","xmin(PATH)"],
              ["south first","ymin(PATH)"],["north first","ymax(PATH) desc"]])%>
        </div>
        <div>
          <label for="per_page">per page</label><%= text_field_tag "per_page","20" %>
        </div>	
        <%= link_to_remote "search", {:submit => "search_form", :before => "setLatLng();setPath('search_path')", :method => 'get', :url => { :action => "search" }}, {:class => "button"} %>
      </fieldset>
      <fieldset id="create_form">
        <legend>create</legend>
        <div><label for="date">date</label>
        <%= text_field_tag 'date', Time.now.strftime("%Y-%m-%d") %></div>
            
        <div>
          <label for="start">start</label>
          <%= text_field_tag 'start'  %>
        </div>
            
        <div>
          <label for="end">end</label>
          <%= text_field_tag 'end'  %>
        </div>
            
        <%= hidden_field_tag 'create_path'  %>
        <%= link_to_remote "create", {:submit => "create_form", :before => "setPath('create_path');", :url => { :action => "create" }}, {:class => "button"} %>
      </fieldset>
      <div id="message"></div>
      <% form_tag({:action => "export_file"}, {:id => "export_form"}) do %>
        <div>
          <%= link_to_remote "delete", {:submit => "tbody", :url => { :action => "destroy" }}, {:class => "button"} %>
          <%= select_tag "type", 
            options_for_select([["kml","kml"], ["xmps","xmps"]]) %> 
          <a href="javascript:void(0);" onclick="$('export_form').submit();" class="button">export</a>
        </div>
            
        <table>
          <tbody id="tbody">
          </tbody>
        </table>
            
      <% end %>
      <div id="pagination"></div>
    </div>
    <div id="map"></div>
    <div id="panorama" style="display: none;"></div>
        
        
        
  </body>
</html>
    
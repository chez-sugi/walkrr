<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <title>Walkrr</title>
    <%= stylesheet_link_tag 'le-frog/jquery-ui-1.7.2.custom' %>
    <%= stylesheet_link_tag 'application' %>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <%= javascript_include_tag 'jquery' %>
    <%= javascript_include_tag 'jquery-ui-1.7.2.custom.min' %>
    <%= javascript_include_tag 'jrails' %>
    <%= javascript_include_tag 'patheditor' %>
    <%= javascript_include_tag 'distancewidget' %>
    <%= javascript_include_tag 'application' %>

        
  </head>
  <body>
    <div id="top">
      <div id="top_left">
        <%= button_to_function "new", "walk.pathEditor.newPath();" , {}, {:class => "button"}%>
        <%= button_to_function "delete", "walk.pathEditor.deletePath();", {}, {:class => "button"}%>
        <%= button_to_function "clear", "walk.pathEditor.deleteAll();", {}, {:class => "button"}%>
        <% form_tag({:action => "import"}, {:id => "import_form", :multipart => true, :target => "import_frame"}) do %>
          <%= file_field_tag "file" %>
          <%= button_to_function "import", "walk.importFile();", {}, {:class => "button"}%>
        <% end %>
        <span id="editing_label">Now editing...<span id="length">0</span>m</span>
        </div>
      
      <iframe id="import_frame" name="import_frame" style="display: none;"></iframe>
          
          
    </div>
    <div id="left">
      <div id="tabs">
        <ul>
          <li><a href="#search_form">search</a></li>
          <li><a href="#create_form">create</a></li>
        </ul>
       <div id="search_form">
          <%= hidden_field_tag "latitude" %>
          <%= hidden_field_tag "longitude" %>
          <%= hidden_field_tag "radius" %>
          <%= hidden_field_tag 'search_path' %>
          <div id="conditionBox">
            <%= radio_button_tag :condition, "neighbor"%><label for="condition_neighbor">neighbor</label>
            <%= radio_button_tag :condition, "areas"%><label for="condition_areas">areas</label>
            <%= radio_button_tag :condition, "cross"%><label for="condition_cross">cross</label>
            <%= radio_button_tag :condition, "all", "checked"%><label for="condition_all">all</label>
          </div>
          <div id="areasBox">
            <label for="areas">areas</label>
            <%= select_tag "areas", options_for_select(@areas), {:multiple => true, :size =>5, :name => 'areas[]'} %>
          </div>
          <div>
            <label >date</label>
            <%= select_tag "year",
              options_for_select(@year_opts)%> /
            <%= select_tag "month",
              options_for_select(@month_opts)%>
          </div>
          <div>
            <label for="order">order</label>
            <%= select_tag "order",
              options_for_select([["new first","date desc"], ["old first","date"],
                ["long first","length desc"], ["short first","length"],
                ["east first","xmax(PATH) desc"], ["west first","xmin(PATH)"],
                ["south first","ymin(PATH)"],["north first","ymax(PATH) desc"]])%>
          </div>
          <div>
            <label for="per_page">per page</label><%= text_field_tag "per_page","20" %>
          </div>
          <%= button_to_remote "search", {:submit => "search_form", :before => "walk.preSearch();", :method => 'get', :url => { :action => "search" }}, {:class => "button"} %>
        </div>
        <div id="create_form">
          <div><label for="date">date</label>
          <%= text_field_tag 'date' %></div>

          <div>
            <label for="start">start</label>
            <%= text_field_tag 'start'  %>
          </div>

          <div>
            <label for="end">end</label>
            <%= text_field_tag 'end'  %>
          </div>

          <%= hidden_field_tag 'create_path'  %>
          <%= button_to_remote "create", {:submit => "create_form", :before => "walk.retrievePointsFromPath('#create_path');", :url => { :action => "create" }}, {:class => "button"} %>
        </div>
      </div>
 
      <div id="message"></div>
      <% form_tag({:action => "export_file"}, {:id => "export_form"}) do %>
        <div>
          <%= button_to_function "check all", "$('input[name=id[]]').attr('checked', true);", {}, {:class => "button"}%>
          <%= button_to_function "reset", "$('input[name=id[]]').attr('checked', false);", {}, {:class => "button"}%>
          <%= button_to_remote "show", {:submit => "tbody", :url => { :action => "show" }}, {:class => "button"} %>
          <%= button_to_function "export", "$('#export_form').submit();", {}, {:class => "button"}%>
          <%= button_to_remote "delete", {:submit => "tbody", :url => { :action => "destroy" }}, {:class => "button"} %>
        </div>
            
        <table>
          <tbody id="tbody">
          </tbody>
        </table>
            
      <% end %>
      <div id="pagination"></div>
    </div>
    <div id="map"></div>
    <div id="panorama" style="display: none;"></div>
        
        
        
  </body>
</html>
    